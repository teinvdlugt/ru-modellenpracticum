<CompuCell3D Revision="20200118" Version="4.1.1">

    <Metadata>
        <!-- Basic properties simulation -->
        <NumberOfProcessors>1</NumberOfProcessors>
        <DebugOutputFrequency>10</DebugOutputFrequency>
        <!-- <NonParallelModule Name="Potts"/> -->
    </Metadata>

    <Potts>
        <!-- Basic properties of Potts model -->
        <Dimensions x="200" y="200" z="1"/>
        <Steps>10000</Steps>
        <NeighborOrder>1</NeighborOrder>
        <Boundary_x>Periodic</Boundary_x>

        <!-- The temperature: -->
        <FluctuationAmplitude>
            <FluctuationAmplitudeParameters CellType="Tumor" FluctuationAmplitude="15"/>
            <FluctuationAmplitudeParameters CellType="Collagen" FluctuationAmplitude="0"/>
        </FluctuationAmplitude>
    </Potts>

    <Plugin Name="CellType">
        <!-- Listing all cell types in the simulation -->
        <CellType TypeId="0" TypeName="Medium"/>
        <CellType Freeze="" TypeId="1" TypeName="Collagen"/> <!-- set to 'Freeze' to disable proteolysis -->
        <CellType TypeId="2" TypeName="Tumor"/>
    </Plugin>

    <Plugin Name="Volume" /> <!-- Parameters set in Python steppable -->

    <!-- Watch what happens when you uncomment this: -->
    <Plugin Name="Surface">
        <SurfaceEnergyParameters CellType="Collagen" LambdaSurface="11" TargetSurface="22"/>
        <SurfaceEnergyParameters CellType="Tumor" LambdaSurface="1" TargetSurface="36"/>
    </Plugin>
    
    <Plugin Name="Contact">
        <Energy Type1="Tumor" Type2="Medium">6.5</Energy>
        <Energy Type1="Tumor" Type2="Collagen">4.5</Energy>
        <Energy Type1="Tumor" Type2="Tumor">10.0</Energy>

        <!-- I don't know what Scianna et al. do with these. -->
        <!-- Let's make them high so the adhesion is weak -->
        <Energy Type1="Medium" Type2="Medium">20.0</Energy>
        <Energy Type1="Medium" Type2="Collagen">20.0</Energy>
        <Energy Type1="Collagen" Type2="Collagen">20.0</Energy>
        <NeighborOrder>4</NeighborOrder>
    </Plugin>

    <Steppable Type="PIFInitializer">
        <!-- Initial layout of cells using PIFF file. -->
        <PIFName>Simulation/collagen_single2d.piff</PIFName>
    </Steppable>
    
    <Plugin Name="Chemotaxis">
        <ChemicalField Name="CTP" Source="FlexibleDiffusionSolverFE">
            <ChemotaxisByType Lambda="200.0" Type="Tumor"/>
        </ChemicalField>
     </Plugin>

     <Plugin Name="Secretion">
        <Field Name="CTP">
        <SecretionOnContact Type="Tumor" SecreteOnContactWith="Collagen">0.03</SecretionOnContact> 
        </Field>
     </Plugin>

    <Steppable Type="FlexibleDiffusionSolverFE">
        <DiffusionField>
            <DiffusionData>
                <FieldName>CTP</FieldName>
                <DiffusionConstant>0.001</DiffusionConstant>
                <DecayConstant>0.03</DecayConstant>
                <DoNotDecayIn>Tumor</DoNotDecayIn>
                <DoNotDiffuseTo>Medium</DoNotDiffuseTo>
            </DiffusionData>
        </DiffusionField>
    </Steppable>

    <!--Not necessary for now-->
    <!--<Plugin Name="CenterOfMass">
        &lt;!&ndash; Module tracking center of mass of each cell &ndash;&gt;
    </Plugin>-->
</CompuCell3D>
